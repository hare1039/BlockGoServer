#+TITLE: Block Go server

* Protocal
<< All transfer in json >>
** Start
| client                         |     | server                        |
|--------------------------------+-----+-------------------------------|
| {                              |     | {                             |
| "cmd": "start",                |     | "status": "$S",               |
| "mode": "$M"                   | --> | "why": "$STR"                 |
| }                              |     | }                             |
| ## $M == ["cvc", "pvc", "cvp"] |     | ## $S == ["ok", "err", "end"] |
|--------------------------------+-----+-------------------------------|
| transfering                    |     |                               |
| {                              |     | {                             |
| "cmd": "transfer",             |     | "status": "$S",               |
| "x": $NUMBER,                  | <-> | "why": "$STR"                 |
| "y": $NUMBER,                  |     | }                             |
| "rotate": $NUMBER              |     |                               |
| }                              |     |                               |
|--------------------------------+-----+-------------------------------|
| Ending                         |     |                               |
| {                              | <-- | {                             |
| "cmd": "ok",                   |     | "status": "end",              |
| "why":"$STR"                   |     | "why": "winner is xxx"        |
| }                              |     | }                             |
|                                | --> | connection close              |
|--------------------------------+-----+-------------------------------|

